{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<form method="post"
      enctype="multipart/form-data"
      class="max-w-4xl mx-auto mt-10 bg-white p-6 rounded shadow-md space-y-6"
      x-data>
  
  {% csrf_token %}
  {{ wizard.management_form }}

  <h2 class="text-2xl font-semibold text-gray-800 mb-4">Step 3: Contact & Family Details</h2>

  <!-- Contact Details -->
  <div class="space-y-4">
    <h3 class="text-lg font-medium text-gray-700 border-b pb-1">Contact Details</h3>

    <div>
      <label for="{{ wizard.form.whatsapp_number.id_for_label }}" class="block text-sm font-medium text-gray-700">WhatsApp Number</label>
      {% render_field wizard.form.whatsapp_number class="w-full border rounded p-2" %}
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4">
      <div>
        <label for="{{ wizard.form.phone_number_1.id_for_label }}" class="block text-sm font-medium text-gray-700">Phone 1</label>
        {% render_field wizard.form.phone_number_1 class="w-full border rounded p-2" %}
      </div>
      <div>
        <label for="{{ wizard.form.phone_number_2.id_for_label }}" class="block text-sm font-medium text-gray-700">Phone 2</label>
        {% render_field wizard.form.phone_number_2 class="w-full border rounded p-2" %}
      </div>
      <div>
        <label for="{{ wizard.form.phone_number_3.id_for_label }}" class="block text-sm font-medium text-gray-700">Phone 3</label>
        {% render_field wizard.form.phone_number_3 class="w-full border rounded p-2" %}
      </div>
      <div>
        <label for="{{ wizard.form.phone_number_4.id_for_label }}" class="block text-sm font-medium text-gray-700">Phone 4</label>
        {% render_field wizard.form.phone_number_4 class="w-full border rounded p-2" %}
      </div>
    </div>
  </div>

  <!-- Family Info -->
  <div class="space-y-6">
    <h3 class="text-lg font-medium text-gray-700 border-b pb-1">Family Information</h3>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label for="{{ wizard.form.father_name.id_for_label }}" class="block text-sm font-medium text-gray-700">Father's Name</label>
        {% render_field wizard.form.father_name class="w-full border rounded p-2" %}
      </div>

      <div>
        <span class="block text-sm font-medium text-gray-700 mb-1">Is Father Alive?</span>
        {% for radio in wizard.form.father_alive %}
          <label class="inline-flex items-center mr-4">
            {{ radio.tag }}
            <span class="ml-2 text-gray-700">{{ radio.choice_label }}</span>
          </label>
        {% endfor %}
      </div>

      <div>
        <label for="{{ wizard.form.mother_name.id_for_label }}" class="block text-sm font-medium text-gray-700">Mother's Name</label>
        {% render_field wizard.form.mother_name class="w-full border rounded p-2" %}
      </div>

      <div>
        <span class="block text-sm font-medium text-gray-700 mb-1">Is Mother Alive?</span>
        {% for radio in wizard.form.mother_alive %}
          <label class="inline-flex items-center mr-4">
            {{ radio.tag }}
            <span class="ml-2 text-gray-700">{{ radio.choice_label }}</span>
          </label>
        {% endfor %}
      </div>

      <div>
        <label for="{{ wizard.form.mother_maiden_name.id_for_label }}" class="block text-sm font-medium text-gray-700">Mother's Maiden Name</label>
        {% render_field wizard.form.mother_maiden_name class="w-full border rounded p-2" %}
      </div>
      <div>
        <label for="{{ wizard.form.mother_maiden_village.id_for_label }}" class="block text-sm font-medium text-gray-700">Mother's Maiden Village</label>
        {% render_field wizard.form.mother_maiden_village class="w-full border rounded p-2" %}
      </div>

      <div>
        <label for="{{ wizard.form.brothers.id_for_label }}" class="block text-sm font-medium text-gray-700">Brothers</label>
        {% render_field wizard.form.brothers class="w-full border rounded p-2" %}
      </div>
      <div>
        <label for="{{ wizard.form.brothers_married.id_for_label }}" class="block text-sm font-medium text-gray-700">Brothers Married</label>
        {% render_field wizard.form.brothers_married class="w-full border rounded p-2" %}
      </div>

      <div>
        <label for="{{ wizard.form.sisters.id_for_label }}" class="block text-sm font-medium text-gray-700">Sisters</label>
        {% render_field wizard.form.sisters class="w-full border rounded p-2" %}
      </div>
      <div>
        <label for="{{ wizard.form.sisters_married.id_for_label }}" class="block text-sm font-medium text-gray-700">Sisters Married</label>
        {% render_field wizard.form.sisters_married class="w-full border rounded p-2" %}
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="flex justify-between items-center pt-6 border-t">
    {% if wizard.steps.prev %}
      <button name="wizard_goto_step"
              value="{{ wizard.steps.prev }}"
              class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium py-2 px-4 rounded">
        ← Back
      </button>
    {% endif %}
    <button type="submit"
            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded shadow">
      Continue →
    </button>
  </div>
</form>
{% endblock %}
